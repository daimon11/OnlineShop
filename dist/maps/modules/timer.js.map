{"version":3,"file":"../../script/modules/timer.js","names":["timer","elem","deadline","decOfNum","number","titles","decCache","Math","min","start","timerDays","timerHours","timerMinutes","timerSeconds","textDays","textHours","textMinutes","textSeconds","blockDays","blockSeconds","blockAllTimer","newTimer","timeRemaring","Date","getTime","now","seconds","floor","minutes","hours","days","getTimeRemaining","textContent","classList","add","remove","document","querySelector","setTimeout","getElements","hasChildNodes","innerHTML"],"sources":["modules/timer.js"],"mappings":"OAAO,MAAMA,MAAQ,CAACC,EAAMC,KAC1B,MA6CMC,EAAW,CAACC,EAAQC,KACxB,IAAIC,EAAW,GAIf,OAFKA,EAASF,KAASE,EAASF,GAAUA,EAAS,IAAM,GAAKA,EAAS,IAAM,GAAK,EADrE,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GACkEG,KAAKC,IAAIJ,EAAS,GAAI,KAE9GC,EAAOC,EAASF,GAAQ,EAG3BK,EAAQ,CACZC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,KAGA,MAAMC,EAzCiB,MAEvB,MAEMC,EAFW,IAAIC,KAAKrB,GAAUsB,UACpBD,KAAKE,MAYrB,MAAO,CAAEH,eAAcI,QARPnB,KAAKoB,MAAML,EAAe,IAAO,IAQjBM,QANhBrB,KAAKoB,MAAML,EAAe,IAAO,GAAK,IAMbO,MAJ3BtB,KAAKoB,MAAML,EAAe,IAAO,GAAK,GAAK,IAITQ,KAFnCvB,KAAKoB,MAAOL,EAAe,IAAO,GAAK,GAAM,IAEL,EA0BpCS,GAEjBrB,EAAUsB,YAAcX,EAASS,KACjCnB,EAAWqB,YAAcX,EAASQ,MAClCjB,EAAaoB,YAAcX,EAASO,QACpCf,EAAamB,YAAcX,EAASK,QAEpCZ,EAASkB,YAAc7B,EAASO,EAAUsB,YAAa,CAAC,OAAQ,MAAO,SACvEjB,EAAUiB,YAAc7B,EAASQ,EAAWqB,YAAa,CAAC,MAAO,OAAQ,UACzEhB,EAAYgB,YAAc7B,EAASS,EAAaoB,YAAa,CAAC,SAAU,SAAU,UAClFf,EAAYe,YAAc7B,EAASU,EAAamB,YAAa,CAAC,UAAW,UAAW,WAE9D,IAAlBX,EAASS,MACXZ,EAAUe,UAAUC,IAAI,mBACxBf,EAAac,UAAUE,OAAO,oBACrBd,EAASS,MAAQ,GAC1BZ,EAAUe,UAAUE,OAAO,mBAC3BhB,EAAac,UAAUC,IAAI,oBAClBb,EAASS,KAAO,IACzBV,EAAca,UAAUC,IAAI,mBAE5BE,SAASC,cAAc,iBAAiBL,YAAc,8BAGrCM,WAAWC,EAAa,IAAK,EAG5CA,EAAc,KAEbtC,EAAKuC,kBA/FVvC,EAAKwC,UAAY,s6BAmGjB,MAAM/B,EAAY0B,SAASC,cAAc,mCACnC1B,EAAayB,SAASC,cAAc,oCACpCzB,EAAewB,SAASC,cAAc,sCACtCxB,EAAeuB,SAASC,cAAc,sCAEtCvB,EAAWsB,SAASC,cAAc,mCAClCtB,EAAYqB,SAASC,cAAc,oCACnCrB,EAAcoB,SAASC,cAAc,sCACrCpB,EAAcmB,SAASC,cAAc,sCAErCnB,EAAYkB,SAASC,cAAc,sBACnClB,EAAeiB,SAASC,cAAc,yBAEtCjB,EAAgBgB,SAASC,cAAc,0BAE7C5B,EACEC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACD,EAGHmB,GAAa","sourcesContent":["export const timer = (elem, deadline) => {\r\n  const createElements = () => {\r\n    elem.innerHTML = `\r\n      <p class=\"main-promotion__timer-title\">\r\n        До конца акции:\r\n          </p>\r\n          <div class=\"timer-wrapper\">\r\n              <p class=\"timer__item timer__item--days\">\r\n                <span class=\"big-numbers\">3</span>\r\n                <span class=\"medium-text\">дня</span>\r\n              </p>\r\n              <p class=\"timer__item timer__item--hours\">\r\n                <span class=\"big-numbers\">8</span>\r\n                <span class=\"medium-text\">часов</span>\r\n              </p>\r\n              <p class=\"timer__item timer__item--minutes\">\r\n                <span class=\"big-numbers\">43</span>\r\n                <span class=\"medium-text\">минуты</span>\r\n              </p>\r\n              <p class=\"timer__item timer__item--seconds visually-hidden\">\r\n                  <span class=\"big-numbers\">43</span>\r\n                  <span class=\"medium-text\">секунд</span>\r\n                </p>\r\n            </div>\r\n          `\r\n  };\r\n\r\n  const getTimeRemaining = () => {\r\n\r\n    const dateStop = new Date(deadline).getTime();\r\n    const dateNow = Date.now();\r\n    const timeRemaring = dateStop - dateNow;\r\n\r\n    // секунды\r\n    const seconds = Math.floor(timeRemaring / 1000 % 60);\r\n    // минуты\r\n    const minutes = Math.floor(timeRemaring / 1000 / 60 % 60);\r\n    // часы\r\n    const hours = Math.floor(timeRemaring / 1000 / 60 / 60 % 24);\r\n    // дни\r\n    const days = Math.floor((timeRemaring / 1000 / 60 / 60) / 24);\r\n\r\n    return { timeRemaring, seconds, minutes, hours, days }\r\n  }\r\n\r\n  // функция склонения текста\r\n  const decOfNum = (number, titles) => {\r\n    let decCache = [],\r\n      decCases = [2, 0, 1, 1, 1, 2];\r\n    if (!decCache[number]) decCache[number] = number % 100 > 4 && number % 100 < 20 ? 2 : decCases[Math.min(number % 10, 5)];\r\n\r\n    return titles[decCache[number]];\r\n  }\r\n\r\n  const start = (\r\n    timerDays,\r\n    timerHours,\r\n    timerMinutes,\r\n    timerSeconds,\r\n    textDays,\r\n    textHours,\r\n    textMinutes,\r\n    textSeconds,\r\n    blockDays,\r\n    blockSeconds,\r\n    blockAllTimer\r\n  ) => {\r\n\r\n    const newTimer = getTimeRemaining();\r\n\r\n    timerDays.textContent = newTimer.days;\r\n    timerHours.textContent = newTimer.hours;\r\n    timerMinutes.textContent = newTimer.minutes;\r\n    timerSeconds.textContent = newTimer.seconds;\r\n\r\n    textDays.textContent = decOfNum(timerDays.textContent, ['день', 'дня', 'дней']);\r\n    textHours.textContent = decOfNum(timerHours.textContent, ['час', 'часа', 'часов']);\r\n    textMinutes.textContent = decOfNum(timerMinutes.textContent, ['минуты', 'минуты', 'минут']);\r\n    textSeconds.textContent = decOfNum(timerSeconds.textContent, ['секунда', 'секунды', 'секунд']);\r\n\r\n    if (newTimer.days === 0) {\r\n      blockDays.classList.add('visually-hidden');\r\n      blockSeconds.classList.remove('visually-hidden');\r\n    } else if (newTimer.days >= 1) {\r\n      blockDays.classList.remove('visually-hidden');\r\n      blockSeconds.classList.add('visually-hidden');\r\n    } else if (newTimer.days < 0) {\r\n      blockAllTimer.classList.add('visually-hidden');\r\n\r\n      document.querySelector('.title_size_1').textContent = 'Акция закончилась, сорян((';\r\n    };\r\n\r\n    const intervalId = setTimeout(getElements, 1000);\r\n  }\r\n\r\n  const getElements = () => {\r\n\r\n    if (!elem.hasChildNodes()) {\r\n      createElements();\r\n    }\r\n\r\n    const timerDays = document.querySelector('.timer__item--days .big-numbers');\r\n    const timerHours = document.querySelector('.timer__item--hours .big-numbers');\r\n    const timerMinutes = document.querySelector('.timer__item--minutes .big-numbers');\r\n    const timerSeconds = document.querySelector('.timer__item--seconds .big-numbers');\r\n\r\n    const textDays = document.querySelector('.timer__item--days .medium-text');\r\n    const textHours = document.querySelector('.timer__item--hours .medium-text');\r\n    const textMinutes = document.querySelector('.timer__item--minutes .medium-text');\r\n    const textSeconds = document.querySelector('.timer__item--seconds .medium-text');\r\n\r\n    const blockDays = document.querySelector('.timer__item--days');\r\n    const blockSeconds = document.querySelector('.timer__item--seconds');\r\n\r\n    const blockAllTimer = document.querySelector('.main-promotion__timer');\r\n\r\n    start(\r\n      timerDays,\r\n      timerHours,\r\n      timerMinutes,\r\n      timerSeconds,\r\n      textDays,\r\n      textHours,\r\n      textMinutes,\r\n      textSeconds,\r\n      blockDays,\r\n      blockSeconds,\r\n      blockAllTimer\r\n    );\r\n  };\r\n\r\n  getElements();\r\n};"]}