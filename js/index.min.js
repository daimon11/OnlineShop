!function(){"use strict";const e=(e,t)=>{const i=(e,t)=>{let i=[];return i[e]||(i[e]=e%100>4&&e%100<20?2:[2,0,1,1,1,2][Math.min(e%10,5)]),t[i[e]]},s=(e,s,a,c,o,r,l,m,d,_,u)=>{const p=(()=>{const e=new Date(t).getTime()-Date.now();return{timeRemaring:e,seconds:Math.floor(e/1e3%60),minutes:Math.floor(e/1e3/60%60),hours:Math.floor(e/1e3/60/60%24),days:Math.floor(e/1e3/60/60/24)}})();e.textContent=p.days,s.textContent=p.hours,a.textContent=p.minutes,c.textContent=p.seconds,o.textContent=i(e.textContent,["день","дня","дней"]),r.textContent=i(s.textContent,["час","часа","часов"]),l.textContent=i(a.textContent,["минуты","минуты","минут"]),m.textContent=i(c.textContent,["секунда","секунды","секунд"]),0===p.days?(d.classList.add("visually-hidden"),_.classList.remove("visually-hidden")):p.days>=1?(d.classList.remove("visually-hidden"),_.classList.add("visually-hidden")):p.days<0&&(u.classList.add("visually-hidden"),document.querySelector(".title_size_1").textContent="Акция закончилась, сорян((");setTimeout(n,1e3)},n=()=>{e.hasChildNodes()||(e.innerHTML='\n      <p class="main-promotion__timer-title">\n        До конца акции:\n          </p>\n          <div class="timer-wrapper">\n              <p class="timer__item timer__item--days">\n                <span class="big-numbers">3</span>\n                <span class="medium-text">дня</span>\n              </p>\n              <p class="timer__item timer__item--hours">\n                <span class="big-numbers">8</span>\n                <span class="medium-text">часов</span>\n              </p>\n              <p class="timer__item timer__item--minutes">\n                <span class="big-numbers">43</span>\n                <span class="medium-text">минуты</span>\n              </p>\n              <p class="timer__item timer__item--seconds visually-hidden">\n                  <span class="big-numbers">43</span>\n                  <span class="medium-text">секунд</span>\n                </p>\n            </div>\n          ');const t=document.querySelector(".timer__item--days .big-numbers"),i=document.querySelector(".timer__item--hours .big-numbers"),n=document.querySelector(".timer__item--minutes .big-numbers"),a=document.querySelector(".timer__item--seconds .big-numbers"),c=document.querySelector(".timer__item--days .medium-text"),o=document.querySelector(".timer__item--hours .medium-text"),r=document.querySelector(".timer__item--minutes .medium-text"),l=document.querySelector(".timer__item--seconds .medium-text"),m=document.querySelector(".timer__item--days"),d=document.querySelector(".timer__item--seconds"),_=document.querySelector(".main-promotion__timer");s(t,i,n,a,c,o,r,l,m,d,_)};n()},t=()=>(new Date).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=async e=>{
//! переписать на промис.then
const i=await(async e=>{const t=await fetch(e);return(await t.json()).data})(`https://gorest.co.in/public-api/posts?page=${e}`);(()=>{const e=document.querySelector(".articles__list"),s=t();i.forEach((t=>{const i=document.createElement("a");i.className="articles__item",i.id=`${t.id}`,i.href=`article.html?id=${t.id}`,i.setAttribute("aria-label",t.title),i.className="topic",i.innerHTML=`\n    ${t.image?`<img src="${image}" alt="Изображение ${t.time}" class="topic__img">`:'<source srcset="./img/no-img.avif" type="image/avif">\n          <source srcset="./img/no-img.webp" type="image/webp">\n          <img class="topic__img" src="./img/no-img.png" width="195"\n          height="195" loading="lazy" alt="Изображение для статьи отсутствует">'}\n      <div class="topic__wrapper">\n        <div class="topic__title-wrapper">\n          <h2 class="topic__title">${t.title}</h2>\n          ${t.time?`<time class="topic__time" datetime="${t.time}">${t.time}</time>`:`<time class="topic__time" datetime="${s}">${s}</time>`}\n      </div>\n\n      <div class="topic__user-box">\n        <figure class="topic__user">\n          <img src="./img/icon-view.svg" alt="Иконка просмотра" class="topic__views-icon">\n          <figcaption class="topic__views-text">0</figcaption>\n        </figure>\n        <figure class="topic__user">\n          <img src="./img/icon-chat.svg" alt="Иконка чата" class="topic__views-icon">\n          <figcaption class="topic__views-text">0</figcaption>\n        </figure>\n\n    </div>\n    `,e.append(i)}))})(),document.querySelector(".pagination").classList.remove("visually-hidden")},s=t(),n=async(e,t)=>{new URLSearchParams(window.location.search).append("id",`${e}`);
//! переписать на промис.then
const i=await(async e=>{const t=await fetch(`https://gorest.co.in/public-api/posts/${e}`);return(await t.json()).data})(e),n=await(async e=>{const t=await fetch(`https://gorest.co.in/public-api/users/${e}`);return(await t.json()).data})(i.user_id);console.log("arr",i),console.log("autorId",n);const a=document.createElement("ul");a.classList.add("breadcrumb"),a.innerHTML=`\n    <li class="breadcrumb__item">\n      <span class="link-to-home">Главная</span>\n    <img src="./img/breadcrumb-icon.svg" alt="Иконка хлебной крошки" class="breadcrumb-icon"> \n    </li> \n    <li class="breadcrumb__item">\n      <span class="link-to-blog">Блог</span>\n    <img src="./img/breadcrumb-icon.svg" alt="Иконка хлебной крошки" class="breadcrumb-icon"> \n    </li> <li class="breadcrumb__item">\n      <span class="link-to-article">${i.title}\n      </span>\n    </li>\n  `;const c=document.createElement("div");c.classList.add("article__text-wrapper"),c.innerHTML=`\n  <h2 class="article__title">${i.title}</h2>\n  <p class="article__paragraf">${i.body}</p>\n  `;const o=document.createElement("div");o.classList.add("article__footer"),o.innerHTML=`\n    <a class="article__btn-back" href="#" onclick="window.history.go(-1); return false;">\n    <img class="article__btn-back-icon" src="./img/to-back-icon.svg" alt="Иконка стрелки">\n    <span class="btn-text">\n      К списку статей\n    </span>\n    </a>\n\n    <div class="article__autor-block">\n    <h4 class="article__autor-name">${n.name?n.name:""}</h4>\n\n    <span class="article__time">${s}</span>\n\n    <div class="article__user-box">\n\n      <figure class="article__user">\n        <img src="./img/icon-view.svg" alt="Иконка просмотра" class="article__views-icon">\n        <figcaption class="article__views-text">0</figcaption>\n      </figure>\n      <figure class="article__user">\n        <img src="./img/icon-chat.svg" alt="Иконка чата" class="article__chat-icon">\n        <figcaption class="article__chat-text">0</figcaption>\n      </figure>\n\n    </div>\n\n    </div>\n  `,t.classList.add("article_visible"),t.append(a,c,o),document.querySelector(".adds-banners").classList.remove("visually-hidden")};let a,c=window.location.pathname;console.log(c),a=c.length<2?"index":c.match(/\/(\w+)\.html/)[1],console.log("html",a);let o=new URLSearchParams(window.location.search);if("index"===a){const t=document.querySelector(".main-promotion__timer"),i=t.getAttribute("data-deadline");console.log("deadline",i),e(t,i)}if("blog"===a){const e=e=>{const t=document.querySelector(".pagination__btn-prev"),s=document.querySelector(".pagination__btn-next"),n=document.querySelectorAll(".item");console.log(n),((e,t,i,s)=>{i.forEach(((e,t)=>{t+1===s?e.classList.add("item-active"):e.classList.remove("item-active")})),1===s?(e.setAttribute("disabled","disabled"),e.querySelector(".item-icon").classList.add("item-icon-disabled"),t.querySelector(".item-icon").classList.remove("item-icon-disabled")):3===s?(t.setAttribute("disabled","disabled"),t.querySelector(".item-icon").classList.add("item-icon-disabled"),e.querySelector(".item-icon").classList.remove("item-icon-disabled")):(e.removeAttribute("disabled","disabled"),t.removeAttribute("disabled","disabled"),e.querySelector(".item-icon").classList.remove("item-icon-disabled"),t.querySelector(".item-icon").classList.remove("item-icon-disabled"));const n=()=>{i.forEach(((e,t)=>{t+1===s?(e.click(),e.classList.add("item-active")):e.classList.remove("item-active")}))};t.addEventListener("click",(()=>{++s>=i.length?s=i.length:e.removeAttribute("disabled"),n()})),e.addEventListener("click",(()=>{--s<=1?s=1:e.removeAttribute("disabled"),n()}))})(t,s,n,e),i(e)};let t=+(o.get("page")?o.get("page"):1);console.log("currentActive",t),e(t)}if("article"===a){n(o.get("id")?o.get("id"):"",document.querySelector(".article__wrapper"))}const r=document.querySelectorAll(".footer__title--type_close"),l=document.querySelectorAll(".footer__list--type_hidden");d=l,(m=r).forEach(((e,t)=>{e.addEventListener("click",(()=>{for(let e=0;e<m.length;e++)t===e?(d[e].style.height=m[e].classList.contains("footer-item_active")?"":`${d[e].scrollHeight}px`,m[e].classList.toggle("footer-item_active"),m[e].classList.toggle("footer__title--type_open"),m[e].classList.toggle("footer__title--type_close")):(m[e].classList.remove("footer__title--type_open"),m[e].classList.remove("footer-item_active"),d[e].style.height=0,m[e].classList.add("footer__title--type_close"))}))}));var m,d,_,u;_=document.querySelector(".header__btn-menu"),u=document.querySelector(".header__menu-group"),_.addEventListener("click",(()=>{document.body.classList.toggle("disable-scroll"),_.classList.toggle("header__btn-menu--type_close"),_.classList.toggle("header__btn-menu--type_open"),u.classList.toggle("header__menu-group--type_close")})),window.addEventListener("resize",(e=>{document.querySelector(".header__menu-group").classList.add("header__menu-group--type_close"),document.body.classList.remove("disable-scroll"),window.innerWidth<=500&&((e,t)=>{const i=[];i.push(e[0],e[1]);const s=[];s.push(t[0],t[1]),i.forEach(((e,t)=>{e.classList.remove("footer__title--type_open"),e.classList.remove("footer-item_active"),e.classList.add("footer__title--type_close")})),s.forEach(((e,t)=>{e.removeAttribute("style")}))})(r,l)}))}();